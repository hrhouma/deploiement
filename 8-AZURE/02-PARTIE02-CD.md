# üìò Tutoriel Complet : Cr√©ation d‚ÄôApplications Web Azure pour D√©veloppement, Qualit√© et Production

Ce tutoriel vous guidera √† travers toutes les √©tapes n√©cessaires pour cr√©er des applications Web sur Azure, destin√©es aux environnements de D√©veloppement, Qualit√©, et Production. Nous couvrirons les √©tapes de configuration, de cr√©ation, de d√©ploiement et de v√©rification des applications Web.

---

## üü¢ Partie 1 : Introduction au Workflow CI/CD avec Azure DevOps

### 1Ô∏è‚É£ Pr√©sentation G√©n√©rale du Workflow CI/CD

Un flux de travail typique de CI/CD (Int√©gration Continue et D√©ploiement Continu) utilisant **Azure DevOps** est con√ßu pour automatiser le processus de construction, de test, et de d√©ploiement d'applications dans diff√©rents environnements (Dev, QA, Prod). Voici les √©l√©ments principaux du flux de travail :

- **D√©veloppeur** : Le processus commence avec un d√©veloppeur qui effectue des modifications sur le code source √† l'aide de **Visual Studio** ou **Visual Studio Code**.
  
- **Azure Repos (Git)** : Le code est ensuite pouss√© vers un d√©p√¥t Git h√©berg√© sur **Azure Repos**, qui agit comme le gestionnaire de version centralis√© o√π tout le code de l'application est stock√©.
  
- **Azure Build Pipeline (CI)** : Une fois le code pouss√©, une pipeline de construction CI est d√©clench√©e automatiquement, comprenant plusieurs √©tapes :
  - R√©cup√©ration du code source depuis le d√©p√¥t.
  - Installation des outils n√©cessaires pour la construction.
  - Construction de la solution, incluant la compilation du code.
  - Ex√©cution des tests pour v√©rifier que les modifications n'ont pas introduit de bugs.
  - Emballage des artefacts (fichiers ex√©cutables, biblioth√®ques, etc.) produits par la construction.
  - Publication des artefacts dans **Azure Artifacts**, pr√™ts pour le d√©ploiement.

- **Azure Release Pipeline (CD)** : Apr√®s la publication des artefacts, une pipeline de release CD est d√©clench√©e pour d√©ployer l'application dans les diff√©rents environnements :
  - D√©ploiement de l'application dans l'environnement de **d√©veloppement** (Dev).
  - D√©ploiement de l'application dans l'environnement de **test** (QA).
  - D√©ploiement de l'application dans l'environnement de **production** (Prod), avec un processus de swap entre le slot de staging et le slot de production pour un d√©ploiement sans interruption.

### 2Ô∏è‚É£ Objectifs de la Partie 1

L'objectif de cette premi√®re partie est de vous familiariser avec le concept g√©n√©ral du pipeline CI/CD et le r√¥le que chaque composant joue dans ce processus. Vous devez comprendre comment le code source passe de l'environnement de d√©veloppement jusqu'√† la production en passant par des √©tapes de construction, de test, et de validation.

### 3Ô∏è‚É£ Conclusion

Cette premi√®re partie vous offre une vue d'ensemble du processus CI/CD dans **Azure DevOps**. Dans les parties suivantes, nous allons plonger plus en d√©tail dans la configuration de chaque √©tape du pipeline CD, en incluant les aspects pratiques et les meilleures pratiques pour garantir un d√©ploiement fluide et s√©curis√© de vos applications.

---

## üîµ Partie 2 : Configuration de l‚ÄôEnvironnement Azure pour le D√©ploiement Continu

### 1Ô∏è‚É£ Connexion √† Azure Portal

**√âtape 1** : Acc√©dez √† **Azure Portal** et connectez-vous √† votre compte **Microsoft Azure**. Une fois connect√©, vous serez dirig√© vers le tableau de bord principal d'Azure.

### 2Ô∏è‚É£ Cr√©ation d‚Äôun Groupe de Ressources

**√âtape 2** : Pour commencer la configuration, cliquez sur **"Resource groups"** dans le menu principal, puis s√©lectionnez **"Create"** pour cr√©er un nouveau groupe de ressources. Un groupe de ressources est un conteneur qui regroupe les ressources Azure associ√©es √† une solution Azure.

### 3Ô∏è‚É£ Cr√©ation d‚Äôun App Service

**√âtape 3** : Apr√®s avoir cr√©√© le groupe de ressources, acc√©dez √† **"App Services"** dans le menu de gauche et cliquez sur **"Create"** pour commencer la cr√©ation d'un service d'application.

**√âtape 4** : Dans le formulaire de cr√©ation de l'App Service, entrez les d√©tails du projet :
- **Subscription** : S√©lectionnez l‚Äôabonnement Azure auquel vous souhaitez associer cette application.
- **Resource Group** : S√©lectionnez le groupe de ressources que vous avez cr√©√© √† l‚Äô√©tape pr√©c√©dente.
- **Name** : Choisissez un nom unique pour votre application Web.
- **Publish** : S√©lectionnez "Code" si vous d√©ployez une application Web classique ou "Docker Container" pour d√©ployer une application dans un conteneur Docker.
- **Runtime stack** : S√©lectionnez la pile d‚Äôex√©cution (par exemple, .NET, Node.js) selon les besoins de votre application.
- **Operating System** : Choisissez le syst√®me d'exploitation, Linux ou Windows.
- **Region** : Choisissez la r√©gion Azure o√π vous souhaitez h√©berger votre application.
- **Pricing plan** : Choisissez un plan tarifaire en fonction des besoins en ressources et du trafic pr√©vu.

### 4Ô∏è‚É£ D√©ploiement de l‚ÄôApplication Web

**√âtape 5** : Apr√®s avoir configur√© les param√®tres de l‚ÄôApp Service, cliquez sur **"Review + create"** pour passer en revue les informations et cr√©er le service. Une fois le service cr√©√©, vous serez redirig√© vers le tableau de bord de l'App Service.

**√âtape 6** : L'application Web que vous avez cr√©√©e sera maintenant pr√™te √† recevoir des d√©ploiements √† partir de la pipeline CD.

### 5Ô∏è‚É£ Validation du D√©ploiement Local

**√âtape 7** : Si vous avez d√©j√† d√©velopp√© l'application localement, vous pouvez la tester en ex√©cutant l'application sur votre machine locale √† l'aide de l'URL `http://localhost:5000/`.

### 6Ô∏è‚É£ Configuration des Pipelines dans Azure DevOps

**√âtape 8** : Acc√©dez √† votre compte **Azure DevOps** et v√©rifiez que votre projet est correctement configur√© pour les pipelines CI/CD.

### üîÑ R√©sum√© de la Partie 2

Dans cette partie, nous avons configur√© l'environnement Azure pour le d√©ploiement continu, en cr√©ant un groupe de ressources et un App Service pour h√©berger notre application. Nous avons √©galement explor√© comment valider le d√©ploiement localement avant de proc√©der au d√©ploiement dans le cloud via les pipelines Azure DevOps.

---

## üü† Partie 3 : Cr√©ation d'une Application Web sur Azure App Service

### 1Ô∏è‚É£ Acc√®s √† la Cr√©ation d'une Web App

**√âtape 1** : Apr√®s avoir acc√©d√© √† votre portail Azure, vous allez cr√©er une nouvelle application Web en utilisant **Azure App Service**. Commencez par cliquer sur **"App Services"** dans le menu principal, puis s√©lectionnez **"Create"** pour d√©marrer le processus de cr√©ation.

### 2Ô∏è‚É£ D√©tails du Projet

**√âtape 2** : Remplissez les informations sous **"Project Details"** :
- **Subscription** : S√©lectionnez l'abonnement Azure auquel l'application sera associ√©e.
- **Resource Group** : Si vous n'avez pas encore de groupe de ressources, cliquez sur **"Create new"** pour en cr√©er un nouveau. Donnez un nom pertinent √† ce groupe, par exemple "DevopsDemo-rg".
- **Instance Details** : Choisissez un nom unique pour votre application Web, comme "dss-helloworldapp-dev".

### 3Ô∏è‚É£ Configuration des Param√®tres de l'Application

**√âtape 3** : Configurez les param√®tres de l'application :
- **Publish** : S√©lectionnez "Code" si vous souhaitez d√©ployer une application web en code natif ou "Docker Container" si vous d√©ployez une application dans un conteneur Docker.
- **Runtime stack** : Choisissez la pile d'ex√©cution adapt√©e, comme ".NET 7 (STS)" si votre application est construite avec .NET Core.
- **Operating System** : S√©lectionnez le syst√®me d'exploitation appropri√©, Linux ou Windows, selon les besoins de votre application.
- **Region** : S√©lectionnez la r√©gion g√©ographique o√π vous souhaitez d√©ployer votre application, par exemple "East US".

### 4Ô∏è‚É£ R√©vision et Cr√©ation de l'Application

**√âtape 4** : Une fois que tous les param√®tres sont correctement configur√©s, cliquez sur **"Review + create"**. Azure va v√©rifier les param√®tres, et vous pourrez ensuite cliquer sur **"Create"** pour lancer la cr√©ation de l'application Web.

### 5Ô∏è‚É£ Validation dans Azure DevOps

**√âtape 5** : Une fois l'application Web cr√©√©e, acc√©dez √† votre projet **Azure DevOps** pour v√©rifier que le d√©p√¥t de code source est correctement configur√©. Vous verrez les fichiers de votre projet, notamment le fichier `.csproj` et les fichiers de configuration JSON.

### üîÑ R√©sum√© de la Partie 3

Dans cette partie, vous avez appris √† cr√©er une application Web sur **Azure App Service**, en configurant les d√©tails du projet, les param√®tres de l'application, et en validant le tout dans **Azure DevOps**. Cette √©tape est cruciale pour pr√©parer l'application au d√©ploiement continu dans un environnement cloud.

---

## üî¥ Partie 3, 4 et 5 : Cr√©ation des Applications Web Azure pour D√©veloppement, Qualit√© et Production

### üü£ Cr√©ation de l'Application Web pour D√©veloppement (Partie 3)

#### 1Ô∏è‚É£ Acc√®s √† la Cr√©ation de l‚ÄôApplication Web

**√âtape 1** : Acc√©dez √† **"App Services"** dans

 le portail Azure et cliquez sur **"Create"**. S√©lectionnez **"Web App"** pour commencer la cr√©ation de votre application Web de d√©veloppement.

#### 2Ô∏è‚É£ D√©tails du Projet

**√âtape 2** : Remplissez les informations sous **"Project Details"** :
- **Subscription** : Choisissez votre abonnement Azure.
- **Resource Group** : Cr√©ez un nouveau groupe de ressources nomm√© par exemple **"DevResourceGroup"**.
- **Instance Details** : Nommez votre application Web, par exemple **"dev-helloworldapp"**.

#### 3Ô∏è‚É£ Configuration des Param√®tres de l'Application

**√âtape 3** : Configurez les d√©tails suivants :
- **Publish** : S√©lectionnez "Code".
- **Runtime stack** : Choisissez ".NET 7".
- **Operating System** : S√©lectionnez "Windows".
- **Region** : Choisissez "East US".

**√âtape 4** : Cliquez sur **"Review + create"**, v√©rifiez les param√®tres, puis cliquez sur **"Create"**.

#### 4Ô∏è‚É£ V√©rification

**√âtape 5** : Une fois le d√©ploiement termin√©, retournez √† **"App Services"** pour v√©rifier que l'application Web de d√©veloppement a bien √©t√© d√©ploy√©e.

---

### üü° Cr√©ation de l'Application Web pour Qualit√© (Partie 4)

#### 1Ô∏è‚É£ Acc√®s √† la Cr√©ation de l‚ÄôApplication Web

**√âtape 1** : R√©p√©tez le processus de cr√©ation de l'application Web en s√©lectionnant **"Create"** sous **"App Services"**. Cette fois, cette application sera destin√©e √† l'environnement de **qualit√©**.

#### 2Ô∏è‚É£ D√©tails du Projet

**√âtape 2** : Remplissez les informations sous **"Project Details"** :
- **Subscription** : S√©lectionnez votre abonnement Azure.
- **Resource Group** : Cr√©ez un nouveau groupe de ressources nomm√© **"QAResourceGroup"**.
- **Instance Details** : Nommez votre application Web, par exemple **"qa-helloworldapp"**.

#### 3Ô∏è‚É£ Configuration des Param√®tres de l'Application

**√âtape 3** : Configurez les param√®tres suivants :
- **Publish** : S√©lectionnez "Code".
- **Runtime stack** : Choisissez ".NET 7".
- **Operating System** : S√©lectionnez "Windows".
- **Region** : Choisissez "Canada Central".

**√âtape 4** : Cliquez sur **"Review + create"**, v√©rifiez les param√®tres, puis cliquez sur **"Create"**.

#### 4Ô∏è‚É£ Configuration du Monitoring

**√âtape 5** : Dans l'onglet **"Monitoring"**, activez **Application Insights** pour surveiller les performances de l'application de qualit√©.

#### 5Ô∏è‚É£ V√©rification

**√âtape 6** : Apr√®s le d√©ploiement, v√©rifiez que l'application Web de qualit√© a √©t√© correctement d√©ploy√©e en acc√©dant √† **"App Services"**.

---

### üü† Cr√©ation de l'Application Web pour Production (Partie 5)

#### 1Ô∏è‚É£ Acc√®s √† la Cr√©ation de l‚ÄôApplication Web

**√âtape 1** : Pour l'application Web de **production**, suivez le m√™me processus en s√©lectionnant **"Create"** sous **"App Services"**. Cette application sera destin√©e √† l'environnement de production.

#### 2Ô∏è‚É£ D√©tails du Projet

**√âtape 2** : Remplissez les informations sous **"Project Details"** :
- **Subscription** : S√©lectionnez votre abonnement Azure.
- **Resource Group** : Cr√©ez un groupe de ressources nomm√© **"ProdResourceGroup"**.
- **Instance Details** : Nommez votre application Web, par exemple **"prod-helloworldapp"**.

#### 3Ô∏è‚É£ Configuration des Param√®tres de l'Application

**√âtape 3** : Configurez les param√®tres suivants :
- **Publish** : S√©lectionnez "Code".
- **Runtime stack** : Choisissez ".NET 7".
- **Operating System** : S√©lectionnez "Windows".
- **Region** : Choisissez "East US".

**√âtape 4** : Cliquez sur **"Review + create"**, v√©rifiez les param√®tres, puis cliquez sur **"Create"**.

#### 4Ô∏è‚É£ Configuration du Monitoring

**√âtape 5** : Activez **Application Insights** dans l'onglet **"Monitoring"** pour surveiller les performances de l'application en production.

#### 5Ô∏è‚É£ Ajout de Slots de D√©ploiement

**√âtape 6** : Pour l'application de production, vous pouvez ajouter des slots de d√©ploiement pour g√©rer les versions en pr√©production et production.

#### 6Ô∏è‚É£ V√©rification et Suivi

**√âtape 7** : Suivez le d√©ploiement depuis l'onglet **"Deployments"** et v√©rifiez que l'application Web de production est bien en ligne.

---


# üü° Partie 6 : Cr√©ation d'une Release Pipeline pour une Application ASP.NET 7.0

Dans cette partie, nous allons configurer une **Release Pipeline** dans **Azure DevOps** pour d√©ployer notre application **ASP.NET 7.0** sur les environnements que nous avons cr√©√©s (D√©veloppement, Qualit√©, Production). Nous allons √©galement √©tablir une connexion entre **Azure DevOps** et nos applications Web h√©berg√©es sur **Azure Portal**.

## 1Ô∏è‚É£ Pr√©paration de la Connexion Azure DevOps - Azure

Avant de cr√©er la Release Pipeline, nous devons configurer une connexion entre **Azure DevOps** et **Azure** afin que la pipeline puisse d√©ployer automatiquement l'application sur les environnements appropri√©s.

### üîπ √âtape 1 : Acc√©der aux Param√®tres du Projet
Acc√©dez √† votre projet **Azure DevOps** et s√©lectionnez **Project Settings** dans le menu lat√©ral gauche.

### üîπ √âtape 2 : Cr√©er une Nouvelle Connexion de Service
1. Dans le menu **Pipelines** sous **Service connections**, cliquez sur **New service connection**.
2. Choisissez **Azure Resource Manager** comme type de connexion, car cela vous permettra de g√©rer les ressources Azure (comme les App Services) √† partir d'Azure DevOps.
3. S√©lectionnez la m√©thode d'authentification **Workload Identity Federation (Automatic)**, ce qui est recommand√© pour une connexion automatique.
4. Configurez le niveau de port√©e (Scope level) sur **Subscription** et s√©lectionnez votre abonnement Azure dans la liste d√©roulante.
5. Assurez-vous de cocher l'option **Grant access permission to all pipelines** pour permettre √† toutes les pipelines d'utiliser cette connexion.
6. Donnez un nom √† la connexion de service pour l'identifier facilement (par exemple, `VSS-S3`), puis cliquez sur **Save** pour cr√©er la connexion.

## 2Ô∏è‚É£ Cr√©ation de la Release Pipeline

Maintenant que la connexion est √©tablie, nous allons cr√©er la **Release Pipeline**.

### üîπ √âtape 1 : Cr√©er une Nouvelle Release Pipeline
1. Dans le menu **Pipelines**, allez √† **Releases** et cliquez sur **New pipeline** pour commencer.
2. S√©lectionnez **Empty job** pour commencer √† partir de z√©ro.

### üîπ √âtape 2 : Configurer l'Environnement de D√©ploiement
1. Dans la nouvelle release, commencez par ajouter un **stage** en cliquant sur **Add a stage**.
2. Nommez ce stage, par exemple **Dev Deployment**, pour repr√©senter le d√©ploiement sur l'environnement de d√©veloppement.
3. Choisissez **Azure App Service deployment** comme t√¢che pour ce stage. Cela permettra de d√©ployer directement sur l'App Service que vous avez configur√© pour le d√©veloppement.

### üîπ √âtape 3 : Configurer les D√©tails du D√©ploiement
1. S√©lectionnez la **connexion de service** que vous avez cr√©√©e pr√©c√©demment (`VSS-S3`).
2. S√©lectionnez l'**App Service** correspondant √† l'environnement de d√©veloppement (par exemple, `dss-helloworldapp-dev`).
3. Configurez les autres options selon les besoins sp√©cifiques de votre d√©ploiement, comme le **package ou dossier** √† d√©ployer, qui peut √™tre r√©f√©renc√© depuis **Azure Artifacts** ou une **pipeline build**.

### üîπ √âtape 4 : Configurer les Environnements QA et Prod
1. Ajoutez un autre **stage** pour **QA Deployment** en suivant les m√™mes √©tapes que pour le d√©veloppement, en s√©lectionnant cette fois-ci l'App Service de qualit√© (`dss-helloworldapp-qa`).
2. R√©p√©tez pour l'environnement de **Production**, en s√©lectionnant l'App Service de production (`dss-helloworldapp-prod`).

## 3Ô∏è‚É£ D√©clencheurs et Conditions

Vous pouvez d√©finir des d√©clencheurs pour cette release pipeline, par exemple, d√©clencher automatiquement le d√©ploiement dans l'environnement de **D√©veloppement** apr√®s chaque **build** r√©ussi. Les environnements de **QA** et **Production** peuvent √™tre configur√©s pour n√©cessiter une approbation manuelle avant le d√©ploiement.

### üîπ √âtape 1 : Ajouter un D√©clencheur Automatique
1. Dans l'onglet **Triggers** de chaque stage, vous pouvez configurer un d√©clencheur automatique bas√© sur la r√©ussite d'une build.
2. Vous pouvez √©galement ajouter des conditions d'approbation pour le passage aux √©tapes suivantes.

## 4Ô∏è‚É£ Sauvegarde et Ex√©cution

- Une fois que tout est configur√©, cliquez sur **Save** pour enregistrer la release pipeline. Vous pouvez maintenant ex√©cuter la pipeline et observer le d√©ploiement de l'application sur les environnements respectifs.
- Vous avez maintenant une **Release Pipeline** configur√©e pour d√©ployer automatiquement votre application **ASP.NET 7.0** sur Azure. Cette configuration vous permet d'avoir un processus de d√©ploiement continu fiable et r√©p√©table, garantissant que vos applications sont d√©ploy√©es de mani√®re coh√©rente sur tous les environnements.


 ---
 

















## üìù **R√©sum√©**

Vous avez maintenant cr√©√© trois applications Web Azure, chacune destin√©e √† un environnement diff√©rent : **D√©veloppement**, **Qualit√©**, et **Production**. Chaque application est configur√©e avec des param√®tres sp√©cifiques et surveill√©e via **Application Insights** pour garantir des performances optimales dans chaque environnement.

---

‚öôÔ∏è Si vous avez besoin de configurer les pipelines CI/CD pour automatiser ces d√©ploiements ==> rehoumahaythem@gmail.com
